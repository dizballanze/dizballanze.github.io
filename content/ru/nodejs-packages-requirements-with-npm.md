Title: Используем npm для управления зависимостями
Date: 2013-01-04 20:10
Author: Admin
Category: Node.js
Tags: npm, package.json

npm - пакетный менеджер для [node.js](/tag/nodejs/ "Node.js"). Сегодня мы рассмотрим как использовать npm для управления зависимостями и автоматизации деплоймента.

![npm package management](media/2013/01/npm.png "node packaged modules")

Установка npm
=============
Если у вас не установлен `npm`, то сделать это можно выполнив следующую команду:

	:::bash
	curl https://npmjs.org/install.sh | sh

Установка пакетов
=================
Для того чтобы установить пакет при помощи `npm` нужно использовать команду `npm install <package>`.
Где `package` может быть:

-  Путь к директории содержащей пакет описываемый файлом `package.json`
-  Архив в формате gzipped tarball
-  URL для скачивания архива в формате gzipped tarball
-  Название пакета в [реестре пакетов](https://npmjs.org/ "Реестр пакетов npm") с возможностью указания версии после знака `@`
-  URL удаленного репозитория git

По-умолчания, установка будет произведена локально, в текущую директорию. Для того чтобы выполнить установку глобально
необходимо вызывать `npm` с флагом `-g`.

Управление зависимостями
========================
При разработке приложений на [node.js](/tag/nodejs/ "Node.js") я использую множество различных модулей. Соответственно,
при разворачивании приложения необходимо быть уверенным, что в системе установлены все требуемые пакеты. Рассмотрим, как npm
помогает нам решить эту проблему.

Для описания пакета npm использует файл `package.json`, который размещается в корневой директории пакета. В файле содержится
большое количество разной информации о пакете, рекомендую вам ознакомиться с [форматом файла](https://npmjs.org/doc/json.html). Нас на данный момент интересует раздел [dependencies](https://npmjs.org/doc/json.html#dependencies), который содержит
список пакетов от которых зависит приложение. К счастью вручную заполнять этот список не придётся, т.к npm умеет генерировать
его самостоятельно. Для того, чтобы сгенерировать `package.json` выполните команду `npm init`, после чего вам необходимо будет ответить на несколько вопросов, вроде названия и версии пакета.

Для того чтобы установить, содержащийся в `package.json`, список пакетов необходимо выполнить команду `npm install` без указания дополнительных аргументов. Соответственно, для того чтобы автоматизировать процесс установки зависимостей, нужно
поддерживать список зависимостей в `package.json` в актуальном состоянии и при каждом обновлении/разворачивании приложения
выполнять команду `npm install`.